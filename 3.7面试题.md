数据库面试

说一说你对MySQL引擎的了解 ？

介绍一下信号量 ？

简述一下操作系统中的缺页中断？

TCP协议是怎么保证有效传输的？





tcp 三次握手 四次挥手

**不使用「两次握手」和「四次握手」的原因：**

- 「两次握手」：无法防止历史连接的建立，会造成双方资源的浪费，也无法可靠的同步双方序列号；

- 「四次握手」：三次握手就已经理论上最少可靠连接建立，所以不需要使用更多的通信次数。

  

**介绍TIME_WAIT状态**：当TCP连接的一方（通常是客户端）主动关闭连接时，会发送一个FIN包给对方，表示希望关闭连接。服务端通常会回一个ACK确认包。当服务端也完成发送后，会再次发送一个FIN包给客户端，此时客户端接收到FIN后会回复一个ACK给服务端，之后客户端会进入TIME_WAIT状态。在TIME_WAIT状态下，连接会保持一段时间（通常是2MSL，即最大报文段生存时间的两倍），以确保在网络中延迟的数据包能够被正确处理





在Linux环境下，项目出现CPU占用过高的情况时，可以按照以下步骤进行排查和处理：

1. **定位高CPU占用的进程**：

- 使用`top`命令查看系统中CPU占用率最高的进程。

1. **分析进程中的线程**：

- 如果发现某个进程的CPU占用率特别高，可以使用`top -H -p [PID]`来查看该进程中各个线程的CPU占用情况。
- 找出占用CPU最高的线程ID。

1. **转换线程ID为16进制**：

- 使用`printf "%x\n" [线程ID]`命令将线程ID转换为16进制格式。

1. **获取线程堆栈信息**：

- 使用`jstack [进程PID] | grep [线程ID的16进制] -A 30`命令获取该线程的Java堆栈信息（如果是Java进程）。这可以帮助定位到具体的代码行或方法调用。
- 如果不是Java进程，可以使用`gdb`或其他相应的调试工具来获取线程的堆栈信息。

1. **分析代码和日志**：

- 根据堆栈信息，检查相关的代码逻辑，看是否有死循环、资源泄露、复杂计算等导致CPU占用过高的问题。
- 同时检查应用程序的日志，看是否有异常或错误信息与高CPU占用相关。

1. **处理措施**：

- 如果是代码问题，修复相应的bug或优化算法。
- 如果是配置问题，调整系统或应用程序的配置参数。
- 如果是资源不足，考虑增加硬件资源或优化资源分配。
- 如果是外部攻击，加强系统的安全防护措施。

